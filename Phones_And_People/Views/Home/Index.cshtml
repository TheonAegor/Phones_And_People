@model Phones_And_People.Models.PersonViewModel

@{
    ViewBag.Title = "Index";
}

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <h3>Список контактов</h3>
        </div>
        <div class="col-md-6">
            <button id="btn-search" type="button" class="btn btn-group btn-lg pull-left">Поиск</button>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>
                        <i class="fas fa-angle-down btn btn-default"></i>
                        Title
                    </th>
                    <th>
                        <i class="fas fa-angle-down btn btn-default"></i>
                        Name
                    </th>
                    <th>
                        <i class="fas fa-angle-down btn btn-default"></i>
                        Last Name
                    </th>
                    <th>
                        <i class="fas fa-angle-down btn btn-default"></i>
                        Date
                    </th>
                    <th></th>
                </tr>
            </thead>
            @*<div id="update_panel">@RenderPartial("nextPage", Model)</div>*@
            <tbody>
                @foreach (var item in Model.People)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DoB)
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<ul class="pagination">
    <li><button id="btn-previous" class="btn"><<</button></li>
    <li><button id="btn-first" class="btn">1</button></li>
    <li><button id="btn-this" class="btn btn-primary">@Model.PageInfo.Page</button></li>
    <li><button id="btn-last" class="btn">@Model.PageInfo.TotalPages</button></li>
    <li><button id="btn-next" class="btn">>></button></li>
</ul>
@section scripts 
    {
    <script type="text/javascript">
        $(document).ready(function () {
            alert($("#btn-this").html());
            $(".pagination").show();
            if ($("#btn-this").html() == 1) {
                $("#btn-first").hide();
                $("#btn-previous").hide();
            }
            else if ($("#btn-this").html() == $("#btn-last").html() ) {
                $("btn-next").hide();
            }
            $(".pagination").click(function (event) {
                changePage(event);
                //event.target.innerText;
            });
        });
        function changePage(event) {
            var page = event.target.innerText;;
            //var page1 = page.toString();
            //alert(page1);
            alert("page = " + page);
            var res = $("#btn-this").html();

            if (page == '<<') {
                alert("<<");
                res *= 1;
                res -= 1;
            }
            else if (page == ">>") {
                alert(">>");
                res *= 1;
                res += 1;
            }
            else
                res = page;
            alert(typeof(res));
            $.ajax({
                url: "nextPage",
                method: "POST",
                data: {
                    "page": res
                },
                success: function (result) {
                    alert("success");
                    $("tbody").html(result);
                }
            });
        }
    </script>
    }